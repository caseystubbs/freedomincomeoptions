name: Secret Inspector

on: workflow_dispatch

jobs:
  debug-secrets:
    runs-on: ubuntu-latest
    steps:
      - name: Check Secrets
        env:
          TRADIER_TOKEN: ${{ secrets.TRADIER_TOKEN }}
          FTP_PASS: ${{ secrets.FTP_PASS }}
          TELEGRAM_TOKEN: ${{ secrets.TELEGRAM_TOKEN }}
        run: |
          echo "------ DIAGNOSTIC REPORT ------"
          
          if [ -z "$TRADIER_TOKEN" ]; then
            echo "❌ TRADIER_TOKEN: MISSING (The vault is empty or name is wrong)"
          else
            echo "✅ TRADIER_TOKEN: FOUND (Length: ${#TRADIER_TOKEN} characters)"
          fi

          if [ -z "$FTP_PASS" ]; then
            echo "❌ FTP_PASS: MISSING"
          else
            echo "✅ FTP_PASS: FOUND"
          fi

          if [ -z "$TELEGRAM_TOKEN" ]; then
            echo "❌ TELEGRAM_TOKEN: MISSING"
          else
            echo "✅ TELEGRAM_TOKEN: FOUND"
          fi
          
          echo "-------------------------------"